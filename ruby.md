# Ruby

- 约定型语言
- 动态语言？
- 没有**Hoisting**，必须先定义再调用（方法），变量/属性无需声明、无语法关键字
- 没有`Function`
- 一切皆对象（方法就不是），全局对象为：`Kernel`，顶级对象为`Object`；
- `Kernel`是对象，也是模块，但不是类
- 所有的模块都是对象，所有的类都是对象也是模块;
- 模块是不可实例化的类，类似`interface && namespace`  ？
- `Module`、`Class`、`Object`是内置类也是对象也是模块，都可实例化（`Module.new`/`Class.new`）

# 类/对象

- 以`class`开头，`end`结束，构造函数名`initialize`
- `className.new`实例化
- 类名以大写字母开头

## 变量/属性

1. 局部变量：约定以小写字母或`_`开头
2. 全局变量：约定以`$`开头，未初始化时值为`nil`
3. 对象属性：约定以`@`开头，Ruby Class中，实例属性全部都是`protected`的，外部只能通过`setter`和`getter`方法访问对象属性
4. 静态属性：类变量约定以`@@`开头
5. 常量：约定以大写字母开头，没有修饰符；必须初始化且不能定义在方法内部。（类/模块常量、全局常量）

> 字符串模板：字符串中可以`#`前缀访问变量，而无需通过`+`符号连接变量与字符串  
>
> 无需声明，调用赋值即可

## 方法/函数

- 方法名必须以小写字母开头，无需`{}`，以`def`开始，`end`结束
- 声明参数的方法，必须正确传递参数个数，以`*`修饰的参数（名）为可变数量，参数为一个数组
- 函数调用无需`()`，多个参数以`,`分隔，参数和方法名之间用空格分隔
- 方法默认返回最后一个语句的值；可用`return`显式声明，且可返回多个值，值之间用`,`分隔，`return`默认返回`nil`
- 定义在`class`外部的方法为模块方法，对`module`内为`protected`
- 静态方法：通过`className.method_name`声明，以`def`开头，`end`结束

### super方法

- `super`代表“继承”的“父`class`或`module`”的同名方法。用于在重载方法中调用父方法
- `super`默认隐式將本地方法的所有实际参数传布传递给父方法，可显式的传递部分参数或全部参数
- 重载方法依据“引用父类”的顺序覆盖方法
- Ruby的重载（overload）只是重写（overwrite）

## 块 - block

- 块不能定义在`module`和`class`内部

## 函数 - function

- 有方法无函数 —— ruby将函数也成为方法
- 方法内部可以嵌套方法

# 作用域

1. 静态作用域，且不向上层递归
2. `Global` -> `Module` -> `Class` -> `Method`
3. 方法/函数内部不能访问其外部的“局部变量”，只有**block**可以